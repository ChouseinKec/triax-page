import type { ElementRecord } from '@/src/core/block/element/types';
import { BASE_GLOBAL_ATTRIBUTES, GENERAL_ARIA_ATTRIBUTES, TEXT_ONLY_ATTRIBUTES, PHRASING_CONTENT, PHRASING_WITH_RUBY, VOID_CONTENT } from './shared';

const PHRASING_ATTRIBUTES = [...BASE_GLOBAL_ATTRIBUTES, ...GENERAL_ARIA_ATTRIBUTES, ...TEXT_ONLY_ATTRIBUTES];

export const PHRASING_ELEMENTS: Partial<ElementRecord> = {
	span: {
		tag: 'span',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Generic inline container with no semantic meaning. Useful for styling parts of text.',
	},
	b: {
		tag: 'b',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Stylistically offset text (typically bold) without conveying importance.',
	},
	strong: {
		tag: 'strong',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Indicates strong importance, seriousness, or urgency.',
	},
	i: {
		tag: 'i',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Text in an alternate voice or mood (typically italic), such as technical terms or idioms.',
	},
	em: {
		tag: 'em',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Emphasized text indicating stress emphasis.',
	},
	u: {
		tag: 'u',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Text that is stylistically different from normal text (often underlined).',
	},
	small: {
		tag: 'small',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Side-comments and small print; typically rendered in a smaller font.',
	},
	mark: {
		tag: 'mark',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Text highlighted for reference or relevance within a context.',
	},
	sub: {
		tag: 'sub',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Subscript inline text for chemical formulas, math, etc.',
	},
	sup: {
		tag: 'sup',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Superscript inline text for footnotes, exponents, etc.',
	},
	code: {
		tag: 'code',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Inline fragment of computer code.',
	},
	abbr: {
		tag: 'abbr',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Abbreviation or acronym; title attribute can provide expansion.',
	},
	s: {
		tag: 's',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Text that is no longer accurate or relevant (rendered with a strikethrough).',
	},
	del: {
		tag: 'del',
		allowedAttributes: [...PHRASING_ATTRIBUTES, 'cite', 'datetime'],
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'A range of text that has been removed from a document. May carry cite/datetime meta.',
	},
	ins: {
		tag: 'ins',
		allowedAttributes: [...PHRASING_ATTRIBUTES, 'cite', 'datetime'],
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'A range of text that has been added to a document. May carry cite/datetime meta.',
	},
	q: {
		tag: 'q',
		allowedAttributes: [...PHRASING_ATTRIBUTES, 'cite'],
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Short inline quotation; cite attribute may reference the source.',
	},
	cite: {
		tag: 'cite',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Title of a work or reference to a source.',
	},
	dfn: {
		tag: 'dfn',
		allowedAttributes: [...PHRASING_ATTRIBUTES, 'title'],
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Term being defined; title attribute can provide a definition hint.',
	},
	var: {
		tag: 'var',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Variable in programming or mathematics.',
	},
	samp: {
		tag: 'samp',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Sample output from programs or systems.',
	},
	kbd: {
		tag: 'kbd',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'User input, typically keyboard input.',
	},
	time: {
		tag: 'time',
		allowedAttributes: [...PHRASING_ATTRIBUTES, 'datetime'],
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Date and/or time, optionally machine-readable via datetime attribute.',
	},
	data: {
		tag: 'data',
		allowedAttributes: [...PHRASING_ATTRIBUTES, 'value'],
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Associates content with a machine-readable value.',
	},
	wbr: {
		tag: 'wbr',
		allowedAttributes: [...BASE_GLOBAL_ATTRIBUTES, ...GENERAL_ARIA_ATTRIBUTES],
		allowedChildren: VOID_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Word break opportunity (void element) suggesting where line breaks may occur.',
	},
	bdi: {
		tag: 'bdi',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Isolates a span of text with a different directionality from its surroundings.',
	},
	bdo: {
		tag: 'bdo',
		allowedAttributes: [...PHRASING_ATTRIBUTES, 'dir'],
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Overrides the text direction of its children using the dir attribute.',
	},
	ruby: {
		tag: 'ruby',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_WITH_RUBY,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Ruby annotation for East Asian typography. Contains base text with rt/rp annotations.',
	},
	rt: {
		tag: 'rt',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Ruby text providing pronunciation or annotation.',
	},
	rp: {
		tag: 'rp',
		allowedAttributes: PHRASING_ATTRIBUTES,
		allowedChildren: PHRASING_CONTENT,
		forbiddenAncestors: null,
		uniqueElements: null,
		orderedElements: null,
		description: 'Fallback parentheses for browsers that do not support ruby annotations.',
	},
};
